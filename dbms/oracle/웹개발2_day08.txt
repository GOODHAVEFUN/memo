day08

시퀀스 
	오라클에서 중복되지 않는 값을 자동으로 순차적으로 생성하는 것
	보통 PK값에 중복값을 방지하기 위해서 사용한다

시퀀스 생성 
	CREATE SEQUENCE 시퀀스명;
	여러 옵션이 있다
	START WITH 시작숫자
	INCREMENT BY 증감숫자
	...
	일반적으로 옵션없이 사용해도 된다

시퀀스 삭제
	DROP SEQUENCE 시퀀스명;

시퀀스 사용
	시퀀스명.XEXTVAL

NULL 
	정의되지않은 값
	빈 값 대신 미정 값을 부여할 때 사용
	PK 불가능,FK 가능, UK가능

NOT NULL 제약조건
	ALTER TABLE [테이블명] MODIFY [칼럼명] NOT NULL

제약조건 삭제
	ALTER TABLE [테이블명] DROP CONSTRAINT [제약조건이름]

조건식
	NULL은 = 으로 비교 할 수 없으며 IS를 사용해야한다
	칼럼명은 IS NULL : 칼럼값이 NULL이면 참
	칼럼명은 IS NOT NULL : 칼럼값이 NULL이 아니면 참

조회시 NULL 값을 다른 값으로 변경
	NVL(칼럼명, '값') : NULL값 대신 다른값으로 변경 후 조회
	NVL2(칼럼명,'NULL이 아닐 때 값','NULL일 떄 값') : NULL값 대신 다른값으로 변경 후 조회

다른 sql파일 추가시
	cmd > sqlplus hr/1111@ 주소

TCL(Transaction Control Language):트랜젝션 제어어

	트랜잭션
		하나의 작업 단위
		여러개의 sql문의 무끄음
	
	COMMIT 
		모든 작업(트랜잭션)을 확정하는 명령어
	ROLLBACK
		이전 커밋 시점으로 되돌아가는 명령어
	
TRUNCATE와 DELETE의 차이 
	DDL의 TRUNCTAE ROLLBACK 불가능
	DML의 TRUNCTAE ROLLBACK 가능
	
	TRUNCATE는 테이블 전체를 삭제하며, 
	DELETE는 특정 데이터를 삭제하지만 WHERE절을 테이블 데이터 전체 삭제가 가능하다
	
	TRUNCATE는 테이블 내용을 전체 삭제하는것이 목적이므로 DELETE보다 빠르게 삭제가능하다
	하지만 고용량 데이터는 복구가 불가능하기에DELETE를 쓰자

정규화
	삽입/수정/삭제의 이상현상을 제거하기 위한 작업
	데이터의 중복을 최소화 하는 데에 목적이있다
	6차 정규화 까지 있으나 3차 정규화까지만 진행한다

1차 정규화 
	같은 성격과 내용의 컬럼이 연속적으로 나타날경우
	(EX)
	상품명
	바지1, 바지2, 바지3
	
	1차 정규화 진행 정규화 진행
	상품명1 | 상품명2 | 상품명3
	 바지1	 바지2, 	  바지3

	조회와 검사가 힘들다

	1차 정규화 최종
	상품명
	바지1
	바지2
	바지3

2차 정규화
	조합키로 구성되었을떄 경우 조합키의 일부분에만 종속되는 속성이 있을때

	과자
	이름PK	맛PK	가격	제조사
	포카칩	기본맛	1600	오리온
	포카칩	양파맛	1400	오리온
	포테토칩	오리지널맛	1500	농심
	포테토칩	양파맛	1700	농심

	2차 정규화 진핸
	과자
	이름PK	맛PK	가격	
	포카칩	기본맛	1600	
	포카칩	양파맛	1400	
	포테토칩	오리지널맛	1500	
	포테토칩	양파맛	1700	

	과자_제조사
	이름PK	제조사
	포카칩	오리온
	포테토칩	농심

3차정규화
	PK가아닌 컬럼이 다른 컬럼을 결정하는 경우
	이행함수 종속을 제거해야한다
	
	회원번호	이름	시	구	동	우편번호
	1	김영선	서울시	송파구	가락동	11111
	2	홍길도	부산시	부산구	부산동	22222

	3차 정규화 진행
	회원번호	이름	우편번호
	

	우편번호	시	구	동

데이터 베이스에서 정규화가 필요한 이유
	데이터베이스를 잘못 설계하면 불필요한 데이터 중복으로 인해 공간이 낭비된다
	이런현상을 이상 현상이라고 한다

이상현상의 종류
	회원번호	이름	부서	프로젝트코드	급여	부서병인원수
	1111	홍길동	개발팀	ABC0001		3000	4
	1111	홍길동	개발팀	DEF0001		2000	4
	1111	홍길동	개발팀	CAB0001		4000	4
	1111	이유리	기획팀	EFG0001		5000	2
	1111	박웅이	디자인팀	GHI0001		6000	4


	삽입이상
		새로운 데이터를 삽입하기위해 불필요한 데이터도 삽입해야하는 문제
		담당프로잭트가 정해지지않은 신입사원이 있다면, 크로젝트코드에는 NULL을 작성할 수 없으므로
		이 사원은 해당 테이브에 추가 될 수가 없다
		따라서 '미정'이라는 프로젝트 코드를 따로 만들어 삽입해야한다	
	갱신이상
		중복행중에서 일부만 변경하여 데이터가 불일치하게 되는모순의 문제
		한명의 사원은 반드시 하나의 부서에만 속할 수 있다
		만약 '홍길동'이 보안팀으로 부서를 옯길시 3개 모두 갱신해주지 않는다면
		개발팀인지 보안팀인지 알수 없다
	삭제이상	
		행을 삭제 했을 때 필요한 데이터도 같이 삭재되는 문제
		'박웅이'가 담당한 프로젝트를 박살내서 드랍하게 된다

	ㅇ이런 이상현상을 예방하고자 정규화는

함수적 종속
	Y= 2x 라는 함수가 있을 때 x의 값이 무엇이냐에 따라 y가 결정된다
	x를 결정자, y를 종속자라고 한다
	x->y
	여기서 x값이 1일 떄 y는 반드시 2가 나온다
	이렇게 x값에 대한 y값이

	2차정규화
	회원번호	프로젝트코드	급여
	
	회원번호 이름	부서	부서별인원수

	3차정규화
	회원번호	프로젝트코드	급여

	회원번호	이름	부서

	부서	부서병인원수

정규화 연습문제
1. 고객 테이블에 고객id , 고객명,주소,전화번호,주문날짜 ,주문상품명,주문수량이있다
	1차 정규화 진행=> 중복 데이터 제거	컬럼 원자성을 보장
	고객테이블
	고객id	고객명	주소	전화번호	주문날짜	주문상품명	주문수량

	1차
	고객테이블
	고객id	고객명	전화번호	주문
	
	주문테이블
	주문번호	고객id	주문날짜	주문상품명	주문수량
	
		

2. 학생과 과목 테이블이 있고 학생 테이블에는 학생id, 학생명, 주소, 과목Id, 과목명, 담당교수명이있다
	2차 정규화 진행=>테이블에서 완전 함수 종속겅을 유지하도록 분리

	수업
	학생id	과목id

	학생
	학생id	학생명	주소
	
	과목
	과목id	과목명	담당교수
	

	
	
3. 도서대출 테이블에 대출id ,도서id ,도서명,저자, 회원id , 회원명 ,대출날짜, 반납날짜가있다 
	3차 정규화 진행=>	
	도서 대출
	대출id	도서id	도서명	저자	회원id	회원명	대출날짜	반납날짜
	
	도서대출
	대출id	도서id	회원id	대출날짜	반납날짜

	도서
	도서id	도서명	저자

	회원	
	훠원id	회원명

1차정규롸
	컬럼이 하나의 속성만을 가져야한다
	하나의 컬럼은 같은 종료나 타입의 값을 가져야한다
	각 컬럼이 유일한 이름을 가져야한다 
	컬럼
	
		